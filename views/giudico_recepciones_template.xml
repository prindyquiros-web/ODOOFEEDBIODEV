<odoo>
  <data>

 

    <!-- Formulario Nueva Recepci√≥n -->

<template id="giudico_nueva_recepcion_template" name="Nueva Recepci√≥n de Materia Prima">
  <t t-call="web.layout">
    <t t-call-assets="web.assets_frontend" t-js="true"/>
<t t-call="feedbio_provision_custom.giudico_lang_buttons"/>
    <style>
           html, body {
  height: 100%;
  margin: 0;
  overflow-y: auto;   /* habilita scroll vertical */
  overflow-x: hidden; /* evita scroll horizontal */
}

.g-main-wrap {
  position: relative;
  min-height: 100vh;
  display: block;       /* ‚ùå no uses flex centrado si quieres scroll */
  padding: 20px 0;
  overflow: visible;    /* deja crecer el contenido */
}.g-bg{position:absolute;inset:0;background-image:url('/feedbio_provision_custom/static/src/img/backgroundweb.png');background-size:cover;background-position:center;background-repeat:no-repeat;transform:scale(1.02);filter:saturate(1.05)}
      .g-overlay{position:absolute;inset:0;background:radial-gradient(ellipse at center, rgba(0,0,0,.15), rgba(0,0,0,.35))}
      .g-frame{position:absolute;inset:12px;border-radius:16px;box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);pointer-events:none}
      .g-content {
  margin: 0 auto;   /* centra horizontal */
  max-width: 800px;
}.g-logo{height:clamp(80px,15vw,160px);object-fit:contain;margin:0 auto 20px;display:block;filter:drop-shadow(0 2px 6px rgba(0,0,0,.25))}
      .g-title{font-size:clamp(20px,2.4vw,28px);letter-spacing:.5px;color:#fff;font-weight:600;text-shadow:0 2px 6px rgba(3,42,9,.45);margin:0 0 22px}
      .g-form{background:rgba(255,255,255,.06);backdrop-filter:blur(2px);border:1px solid rgba(255,255,255,.14);border-radius:12px;padding:20px;box-shadow:0 8px 18px rgba(0,0,0,.18);text-align:left}
      .form-group{display:flex;flex-direction:column;gap:6px;margin-bottom:14px}
      .form-group label{color:#fff;font-weight:600}
      .form-group input, .form-group textarea, .form-group select{
        width:100%;padding:10px;border-radius:10px;
        border:1px solid rgba(255,255,255,.18);
        background:rgba(255,255,255,.9);
      }
      .giudico-btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;background:#16a34a;color:#fff;padding:12px 18px;border-radius:12px;text-decoration:none;font-weight:700;letter-spacing:.3px;border:1px solid rgba(255,255,255,.14);cursor:pointer}
      .giudico-btn:hover{background:#15803d}
      .g-actions{display:flex;gap:10px;justify-content:center;margin-top:14px}
      .calc-field {
        background: rgba(209, 213, 219, 0.6); /* gris transl√∫cido */
        color: #1e40af;  /* azul fuerte */
        font-weight: 600;
        cursor: not-allowed;
      }
      .calc-field:focus { outline: none; box-shadow: none; }
      .form-group input.calc-field {
        background: rgba(209, 213, 219, 0.6);
        color: #1e40af;
        font-weight: 600;
        cursor: not-allowed;
      }
      .form-group input.calc-field:focus { outline: none; box-shadow: none; }
      .calc-hint {
        font-size: 0.8rem;
        color: #2563eb;   /* azul */
        font-weight: 600;
        margin-top: -4px;
        margin-bottom: 6px;
        display: inline-block;
      }
             .giudico-btn-secondary2 {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background:#374151;
  color:#fff;
  padding:10px 16px;
  border-radius:8px;
  text-decoration:none;
  font-weight:700;
  border:1px solid rgba(255,255,255,.14);
  transition:.2s;
}
.giudico-btn-secondary2:hover { background:#1f2937; }
        </style>


         <div class="g-main-wrap">
        <div class="g-bg"></div><div class="g-overlay"></div><div class="g-frame"></div>
        <div class="g-content">
          <img src="/feedbio_provision_custom/static/src/img/LogoGiudico.png" alt="Giudico" class="g-logo"/>
          <h2 class="g-title" t-translation="on">üöö Nueva Recepci√≥n</h2>
          

          <form class="g-form" action="/giudico/recepcion/nueva" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

            <!-- Selecci√≥n de Orden -->
            <div class="form-group">
              <label t-translation="on">Orden de Pedido</label>
              <select name="orden_pedido_id" id="orden_pedido" required="required">
                <option value="" t-translation="on">Seleccione una orden</option>
                <t t-foreach="ordenes" t-as="o">
                  <option t-att-value="o.id"><t t-out="o.name"/> - <t t-out="o.proveedor_id.name"/></option>
                </t>
              </select>
            </div>
 <div class="form-group">
  <label t-translation="on">Almac√©n</label>
  <select name="almacen_id" required="required">
    <option value="" t-translation="on">Seleccione un almac√©n</option>
    <t t-foreach="almacenes" t-as="a">
      <option t-att-value="a.id"><t t-out="a.name"/> (<t t-out="a.estado"/>)</option>
    </t>
  </select>
</div>

            <div class="form-group">
              <label t-translation="on">Lote</label>
              <select name="lote_id" required="required">
                <t t-foreach="lotes" t-as="l">
                  <option t-att-value="l.id"><t t-out="l.name"/></option>
                </t>
              </select>
            </div>

            <div class="form-group">
              <label t-translation="on">Proveedor</label>
              <input type="text" id="proveedor" readonly="readonly"/>
            </div>

            <div class="form-group">
              <label t-translation="on">Producto</label>
              <input type="text" id="producto" readonly="readonly"/>
            </div>

            <div class="form-group">
              <label t-translation="on">Cantidad (MT)</label>
              <input type="number" step="0.01" id="cantidad" name="cantidad" required="required"/>
            </div>

            <div class="form-group">
              <label t-translation="on">Precio Unitario</label>
              <input type="number" step="0.01" id="precio_unitario" name="precio_unitario" required="required"/>
            </div>

            <div class="form-group">
              <label t-translation="on">Subtotal</label>
              <span class="calc-hint" t-translation="on">(Calculado autom√°ticamente)</span>
              <input type="text" id="subtotal" class="calc-field" readonly="readonly"/>
            </div>

            <div class="form-group">
              <label t-translation="on">N¬∞ Cami√≥n</label>
              <input type="text" name="numero_camion" readonly="readonly" t-att-value="numero_camion"/>
            </div>
            <div class="form-group">
  <label t-translation="on">Placa del Cami√≥n</label>
  <input type="text" name="camion" placeholder="Ej: ABC-123"/>
</div>


            <div class="form-group">
              <label t-translation="on">Sacos</label>
              <input type="number" name="sacos"/>
            </div>

            <div class="form-group">
              <label t-translation="on">Peso Neto (kg)</label>
              <input type="number" step="0.01" id="peso_neto" name="peso_neto"/>
            </div>

            <div class="form-group">
              <label t-translation="on">Observaciones</label>
              <textarea name="observaciones" 
          ></textarea>

            </div>

            <!-- Solo admin -->
            <div class="form-group" groups="base.group_system">
              <label t-translation="on">Merma (kg)</label>
              <input type="text" id="merma" class="calc-field" readonly="readonly"/>
            </div>

            <div class="form-group" groups="base.group_system">
              <label t-translation="on">Margen (%)</label>
              <input type="text" id="margen" class="calc-field" readonly="readonly"/>
            </div>

            <div class="form-group" groups="base.group_system">
              <label t-translation="on">Costo Total</label>
              <input type="text" id="costo_total" class="calc-field" readonly="readonly"/>
            </div>

            <div class="form-group" groups="base.group_system">
              <label t-translation="on">Desviaci√≥n (%)</label>
              <input type="text" id="desviacion" class="calc-field" readonly="readonly"/>
            </div>

            <div class="form-group">
              <label t-translation="on">Archivos relacionados</label>
              <input type="file" name="archivos[]" multiple="multiple"/>
            </div>

            <div class="g-actions">
              <button type="submit" class="giudico-btn" t-translation="on">üíæ Guardar Recepci√≥n</button>
              <a href="/giudico/recepciones" class="giudico-btn g-cancel" t-translation="on">Cancelar</a>
            </div>

            <input type="hidden" id="cantidad_contrato"/>
            <input type="hidden" id="precio_contrato"/>
          </form>
        </div>
      </div>

    <!-- Script -->
    <script>
    <![CDATA[
    odoo.define('giudico.recepcion', function (require) {
      "use strict";
      var ajax = require('web.ajax');
      const $ = (id) => document.getElementById(id);

      function calcInternos(){
        let cantidad = parseFloat($("cantidad").value) || 0;
        let precio = parseFloat($("precio_unitario").value) || 0;
        let peso = parseFloat($("peso_neto").value) || 0;
        let cantidad_contrato = parseFloat($("cantidad_contrato").value) || 0;
        let precio_contrato = parseFloat($("precio_contrato").value) || 0;

        if ($("subtotal")) $("subtotal").value = (cantidad * precio).toFixed(4);
        if ($("costo_total")) $("costo_total").value = (cantidad * precio).toFixed(4);

        if ($("merma")){
          let contrato_kg = cantidad_contrato * 1000;
          let merma = (contrato_kg > 0 && peso > 0) ? (contrato_kg - peso) : 0;

          $("merma").value = merma.toFixed(4);
        }

        if ($("margen")){
          let margen = precio_contrato ? ((precio_contrato - precio) / precio_contrato) * 100 : 0;
          $("margen").value = margen.toFixed(4) + " %";
        }

        if ($("desviacion")){
          let desviacion = cantidad_contrato ? ((cantidad - cantidad_contrato) / cantidad_contrato) * 100 : 0;
          $("desviacion").value = desviacion.toFixed(4) + " %";
        }
      }

      if ($("cantidad")) $("cantidad").addEventListener("input", calcInternos);
      if ($("precio_unitario")) $("precio_unitario").addEventListener("input", calcInternos);
      if ($("peso_neto")) $("peso_neto").addEventListener("input", calcInternos);

      const selOrden = document.getElementById("orden_pedido");
      if (selOrden){
        selOrden.addEventListener("change", function(){
          var ordenId = this.value;
          if(!ordenId) return;
          ajax.jsonRpc("/giudico/api/orden_info/" + ordenId, 'call', {})
            .then(function(data){
              $("proveedor").value = data.proveedor || "";
              $("producto").value = data.producto || "";
              $("cantidad").value = data.cantidad_contrato || "";
              $("precio_unitario").value = data.precio_contrato || "";
              $("cantidad_contrato").value = data.cantidad_contrato || 0;
              $("precio_contrato").value = data.precio_contrato || 0;

              calcInternos();
            })
            .catch(function(e){ console.error("Error jsonRpc orden_info:", e); });
        });
      }
    });]]>
    </script>
  </t>
</template>

<template id="giudico_editar_recepcion_template" name="Editar Recepci√≥n de Materia Prima">
  <t t-call="web.layout">
    <t t-call-assets="web.assets_frontend" t-js="true"/>
<t t-call="feedbio_provision_custom.giudico_lang_buttons"/>
    <style>
      html, body {
  height: 100%;
  margin: 0;
  overflow-y: auto;   /* habilita scroll vertical */
  overflow-x: hidden; /* evita scroll horizontal */
}

.g-main-wrap {
  position: relative;
  min-height: 100vh;
  display: block;       /* ‚ùå no uses flex centrado si quieres scroll */
  padding: 20px 0;
  overflow: visible;    /* deja crecer el contenido */
}.g-bg{position:absolute;inset:0;background-image:url('/feedbio_provision_custom/static/src/img/backgroundweb.png');background-size:cover;background-position:center;background-repeat:no-repeat;transform:scale(1.02);filter:saturate(1.05)}
      .g-overlay{position:absolute;inset:0;background:radial-gradient(ellipse at center, rgba(0,0,0,.15), rgba(0,0,0,.35))}
      .g-frame{position:absolute;inset:12px;border-radius:16px;box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);pointer-events:none}
      .g-content {
  margin: 0 auto;   /* centra horizontal */
  max-width: 800px;
}
.g-logo{height:clamp(80px,15vw,160px);object-fit:contain;margin:0 auto 20px;display:block;filter:drop-shadow(0 2px 6px rgba(0,0,0,.25))}
      .g-title{font-size:clamp(20px,2.4vw,28px);letter-spacing:.5px;color:#fff;font-weight:600;text-shadow:0 2px 6px rgba(3,42,9,.45);margin:0 0 22px}
      .g-form{background:rgba(255,255,255,.06);backdrop-filter:blur(2px);border:1px solid rgba(255,255,255,.14);border-radius:12px;padding:20px;box-shadow:0 8px 18px rgba(0,0,0,.18);text-align:left}
      .form-group{display:flex;flex-direction:column;gap:6px;margin-bottom:14px}
      .form-group label{color:#fff;font-weight:600}
      .form-group input, .form-group textarea, .form-group select{
        width:100%;padding:10px;border-radius:10px;
        border:1px solid rgba(255,255,255,.18);
        background:rgba(255,255,255,.9);
      }
      .giudico-btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;background:#16a34a;color:#fff;padding:12px 18px;border-radius:12px;text-decoration:none;font-weight:700;letter-spacing:.3px;border:1px solid rgba(255,255,255,.14);cursor:pointer}
      .giudico-btn:hover{background:#15803d}
      .g-actions{display:flex;gap:10px;justify-content:center;margin-top:14px}
      .g-cancel{background:#6b7280}
      .g-cancel:hover{background:#4b5563}

      /* Campos calculados */
      .calc-field {background: rgba(209, 213, 219, 0.6);color: #1e40af;font-weight: 600;cursor: not-allowed;}
      .calc-field:focus { outline: none; box-shadow: none; }
      .calc-hint {font-size: 0.8rem;color: #2563eb;font-weight: 600;margin-top: -4px;margin-bottom: 6px;display: inline-block;}
             .giudico-btn-secondary2 {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background:#374151;
  color:#fff;
  padding:10px 16px;
  border-radius:8px;
  text-decoration:none;
  font-weight:700;
  border:1px solid rgba(255,255,255,.14);
  transition:.2s;
}
.giudico-btn-secondary2:hover { background:#1f2937; }
        </style>


       <div class="g-main-wrap">
      <div class="g-bg"></div><div class="g-overlay"></div><div class="g-frame"></div>
      <div class="g-content">
        <img src="/feedbio_provision_custom/static/src/img/LogoGiudico.png" alt="Giudico" class="g-logo"/>
        <h2 class="g-title" t-translation="on">‚úèÔ∏è Editar Recepci√≥n</h2>

        <form class="g-form" t-att-action="'/giudico/recepcion/editar/%d' % recepcion.id" method="POST" enctype="multipart/form-data">
          <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

          <div class="form-group">
            <label t-translation="on">Orden de Pedido</label>
            <select id="orden_pedido" name="orden_pedido_id" required="required">
              <t t-foreach="ordenes" t-as="o">
                <option t-att-value="o.id" t-att-selected="o.id == recepcion.orden_id.id">
                  <t t-out="o.name"/> - <t t-out="o.proveedor_id.name"/>
                </option>
              </t>
            </select>
          </div>

          <div class="form-group">
            <label t-translation="on">Lote</label>
            <select name="lote_id" required="required">
              <t t-foreach="lotes" t-as="l">
                <option t-att-value="l.id"><t t-out="l.name"/></option>
              </t>
            </select>
          </div>

          <div class="form-group">
            <label t-translation="on">Cantidad (MT)</label>
            <input type="number" step="0.01" id="cantidad" name="cantidad" t-att-value="recepcion.cantidad"/>
          </div>

          <div class="form-group">
            <label t-translation="on">Precio Unitario</label>
            <input type="number" step="0.01" id="precio_unitario" name="precio_unitario" t-att-value="recepcion.precio_unitario"/>
          </div>

          <div class="form-group">
            <label t-translation="on">Subtotal</label>
            <span class="calc-hint" t-translation="on">(Calculado autom√°ticamente)</span>
            <input type="text" id="subtotal" class="calc-field" readonly="readonly"
              t-att-value="('%.4f' % (recepcion.subtotal or 0.0)) if recepcion else ''"/>
          </div>

          <div class="form-group">
            <label t-translation="on">N¬∞ Cami√≥n</label>
            <input type="text" name="numero_camion" readonly="readonly" t-att-value="numero_camion"/>
          </div>
          <div class="form-group">
  <label t-translation="on">Placa del Cami√≥n</label>
  <input type="text" name="camion" t-att-value="recepcion.camion or ''" placeholder="Ej: ABC-123"/>
</div>


          <div class="form-group">
            <label t-translation="on">Sacos</label>
            <input type="number" name="sacos" t-att-value="recepcion.sacos"/>
          </div>

          <div class="form-group">
            <label t-translation="on">Peso Neto (kg)</label>
            <input type="number" step="0.01" id="peso_neto" name="peso_neto" t-att-value="recepcion.peso_neto"/>
          </div>

          <div class="form-group">
            <label t-translation="on">Observaciones</label>
            <textarea name="observaciones"><t t-out="recepcion.observaciones"/></textarea>
          </div>

          <div class="form-group" groups="base.group_system">
            <label t-translation="on">Merma (kg)</label>
            <input type="text" id="merma" class="calc-field" readonly="readonly"
              t-att-value="('%.4f' % (recepcion.merma or 0.0)) if recepcion else ''"/>
          </div>

          <div class="form-group" groups="base.group_system">
            <label t-translation="on">Margen (%)</label>
            <input type="text" id="margen" class="calc-field" readonly="readonly"
              t-att-value="(('%.4f' % (recepcion.margen or 0.0)) + ' %') if recepcion else ''"/>
          </div>

          <div class="form-group" groups="base.group_system">
            <label t-translation="on">Costo Total</label>
            <input type="text" id="costo_total" class="calc-field" readonly="readonly"
              t-att-value="('%.4f' % (recepcion.costo_total or 0.0)) if recepcion else ''"/>
          </div>

          <div class="form-group" groups="base.group_system">
            <label t-translation="on">Desviaci√≥n (%)</label>
            <input type="text" id="desviacion" class="calc-field" readonly="readonly"
              t-att-value="(('%.4f' % (recepcion.desviacion or 0.0)) + ' %') if recepcion else ''"/>
          </div>

          <div class="form-group">
            <label t-translation="on">Archivos cargados</label>
            <ul>
              <t t-foreach="recepcion.documento_ids" t-as="doc">
                <li>
                  <a t-att-href="'/web/content/x.recepcion.documento/%d/file/%s' % (doc.id, doc.file_filename)" target="_blank">
                    <t t-out="doc.file_filename"/>
                  </a>
               <a t-att-href="'/giudico/recepcion/eliminar/%d' % r.id"
   class="delete-btn"
   onclick="return confirm('¬øEst√° seguro de eliminar esta recepci√≥n?');"
   t-translation="on">
   Eliminar
</a>


                </li>
              </t>
            </ul>
          </div>

          <div class="form-group">
            <label t-translation="on">Archivos relacionados</label>
            <input type="file" name="archivos[]" multiple="multiple"/>
          </div>

          <div class="g-actions">
            <button type="submit" class="giudico-btn" t-translation="on">üíæ Guardar Cambios</button>
            <a href="/giudico/recepciones" class="giudico-btn g-cancel" t-translation="on">Cancelar</a>
          </div>

          <input type="hidden" id="cantidad_contrato" t-att-value="recepcion.orden_id.cantidad_mt or 0"/>
          <input type="hidden" id="precio_contrato" t-att-value="recepcion.orden_id.precio_unitario or 0"/>
        </form>
      </div>
    </div>

    <!-- Script -->
    <script>
   <![CDATA[ odoo.define('giudico.editar_recepcion', function (require) {
      "use strict";
      const $ = (id) => document.getElementById(id);

      function calcInternos(){
        let cantidad = parseFloat($("cantidad").value) || 0;
        let precio = parseFloat($("precio_unitario").value) || 0;
        let peso = parseFloat($("peso_neto").value) || 0;
        let cantidad_contrato = parseFloat($("cantidad_contrato").value) || 0;
        let precio_contrato = parseFloat($("precio_contrato").value) || 0;

        if ($("subtotal")) $("subtotal").value = (cantidad * precio).toFixed(4);
        if ($("costo_total")) $("costo_total").value = (cantidad * precio).toFixed(4);

        if ($("merma")){
          let contrato_kg = cantidad_contrato * 1000;
          let merma = (contrato_kg > 0 && peso > 0) ? (contrato_kg - peso) : 0;

          $("merma").value = merma.toFixed(4);
        }

        if ($("margen")){
          let margen = precio_contrato ? ((precio_contrato - precio) / precio_contrato) * 100 : 0;
          $("margen").value = margen.toFixed(4) + " %";
        }

        if ($("desviacion")){
          let desviacion = cantidad_contrato ? ((cantidad - cantidad_contrato) / cantidad_contrato) * 100 : 0;
          $("desviacion").value = desviacion.toFixed(4) + " %";
        }
      }

      if ($("cantidad")) $("cantidad").addEventListener("input", calcInternos);
      if ($("precio_unitario")) $("precio_unitario").addEventListener("input", calcInternos);
      if ($("peso_neto")) $("peso_neto").addEventListener("input", calcInternos);

      // recalcular al cargar la p√°gina
      calcInternos();
    });]]>
    </script>
  </t>
</template>

    <!-- Lista de Recepciones -->
   <template id="giudico_list_recepciones_template" name="Lista de Recepciones Giudico">
  <t t-call="web.layout">
    <t t-call-assets="web.assets_frontend" t-js="true"/>
    <t t-call="feedbio_provision_custom.giudico_lang_buttons"/>

    <style>
     html, body {
  height: 100%;
  margin: 0;
  overflow-y: auto;   /* ‚úÖ scroll vertical global */
}

.g-main-wrap {
  position: relative;
  min-height: 100vh;
  display: block;     /* ‚ùå no flex centrado */
  padding: 20px 0;
  overflow: visible;  /* ‚úÖ deja crecer el contenido */
}

/* === Fondo fijo === */
.g-bg,
.g-overlay,
.g-frame {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.g-bg {
  background-image: url('/feedbio_provision_custom/static/src/img/backgroundweb.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transform: scale(1.02);
  filter: saturate(1.05);
}
.g-overlay {
  background: radial-gradient(ellipse at center, rgba(0,0,0,.15), rgba(0,0,0,.35));
}
.g-frame {
  inset: 12px;
  border-radius: 16px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
}

/* === Contenido centrado === */
.g-content {
  position: relative;
  z-index: 2;
  width: 100%;
  max-width: 1400px;
  padding: 20px 0 40px;
  text-align: center;
  margin: 0 auto;   /* ‚úÖ centra horizontalmente */
}

     
      .g-logo{height:clamp(80px,15vw,160px);object-fit:contain;margin:0 auto 20px;display:block;filter:drop-shadow(0 2px 6px rgba(0,0,0,.25))}
      .g-title{font-size:clamp(20px,2.4vw,28px);letter-spacing:.5px;color:#fff;font-weight:600;text-shadow:0 2px 6px rgba(3,42,9,.45);margin:0 0 22px}

      /* Tabla */
      .giudico-table { width:100%; background:#fff; border-collapse: collapse; color:#111; border-radius:12px; overflow:hidden; }
      .giudico-table th, .giudico-table td { padding:12px; border-bottom:1px solid rgba(0,0,0,0.1); text-align:left; }
      .giudico-table th { background:rgba(0,0,0,0.05); font-weight:600; }
      .giudico-table tr:hover td { background:rgba(0,0,0,0.04); }
      .table-wrapper{overflow-x:auto;border-radius:12px;}

      /* Botones */
      .giudico-btn{display:inline-flex;align-items:center;justify-content:center;background:#16a34a;color:#fff;padding:8px 14px;border-radius:8px;text-decoration:none;font-weight:700;border:1px solid rgba(255,255,255,.14);transition:.2s}
      .giudico-btn:hover{background:#15803d}

      .edit-btn,.delete-btn{padding:6px 12px;border-radius:6px;font-weight:600;text-decoration:none;color:#fff}
      .edit-btn{background:#2563eb}.edit-btn:hover{background:#1e3a8a}
      .delete-btn{background:#dc2626}.delete-btn:hover{background:#b91c1c}

      .acciones-crud{display:flex;flex-wrap:wrap;gap:6px}

      /* Estados */
      .estado-actions{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
      .estado-btn{display:inline-block;padding:5px 10px;border-radius:6px;font-weight:600;text-decoration:none;color:#fff;font-size:13px;transition:0.2s}
      .estado-borrador{background:#6b7280}.estado-validada{background:#16a34a}.estado-cerrada{background:#2563eb}.estado-cancelada{background:#dc2626}
      .estado-btn:hover{filter:brightness(0.9)}
      .estado-actual{border:2px solid #111;box-shadow:0 0 6px rgba(0,0,0,0.3)}

      /* Bot√≥n imprimir */
      .print-btn{background:#f59e0b;color:#fff;padding:6px 12px;border-radius:6px;font-weight:600;text-decoration:none}
      .print-btn:hover{background:#b45309}

      .g-actions-top{margin-bottom:14px;text-align:right}
      .g-content{position:relative;z-index:2;width:100%;max-width:1400px;padding:20px 0 40px;text-align:center;margin:0 auto}
             .giudico-btn-secondary2 {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background:#374151;
  color:#fff;
  padding:10px 16px;
  border-radius:8px;
  text-decoration:none;
  font-weight:700;
  border:1px solid rgba(255,255,255,.14);
  transition:.2s;
}
.giudico-btn-secondary2:hover { background:#1f2937; }
        </style>


         

    <div class="g-main-wrap">
      <div class="g-bg"></div><div class="g-overlay"></div><div class="g-frame"></div>
      <div class="g-content">
        <img src="/feedbio_provision_custom/static/src/img/LogoGiudico.png" alt="Giudico" class="g-logo"/>
        <h2 class="g-title" t-translation="on">üöö Lista de Recepciones</h2>

        <div class="g-actions-top">
          <a href="/giudico/recepcion/nueva" class="giudico-btn" t-translation="on">‚ûï Nueva Recepci√≥n</a>
          <a href="/giudico/menu" class="giudico-btn" style="background:#374151" t-translation="on">Volver</a>
        </div>

        <div class="table-wrapper">
          <table class="giudico-table">
            <thead>
              <tr>
                <th t-translation="on">Referencia</th>
                <th t-translation="on">Orden</th>
                <th t-translation="on">Proveedor</th>
                <th t-translation="on">Placa del Cami√≥n</th>
                <th t-translation="on">Producto</th>
                <th t-translation="on">Cantidad</th>
                <th t-translation="on">Precio</th>
                <th t-translation="on">Subtotal</th>
                <th t-translation="on">Peso Neto (kg)</th>
                <th t-translation="on">Merma (kg)</th>
                <th t-translation="on">Desviaci√≥n</th>
                <th t-translation="on">Almac√©n</th>
                <th t-translation="on">Documentos</th>
                <th t-translation="on">Estado</th>
                <th t-translation="on">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <t t-foreach="recepciones" t-as="r">
                <tr>
                  <td><t t-out="r.name"/></td>
                  <td><t t-out="r.orden_id.name"/></td>
                  <td><t t-out="r.proveedor_id.name"/></td>
                  <td><t t-out="r.camion or '-'"/></td>
                  <td><t t-out="r.producto"/></td>
                  <td><t t-out="r.cantidad"/></td>
                  <td><t t-out="r.precio_unitario"/></td>
                  <td><t t-out="r.subtotal"/></td>
                  <td><t t-out="r.peso_neto"/></td>
                  <td><t t-out="r.merma"/></td>
                  <td>
                    <span t-attf-style="color: #{'red' if r.desviacion and r.desviacion > 10 else 'green'};">
                      <t t-out="'%.2f' % r.desviacion"/> %
                    </span>
                  </td>
                  <td><t t-out="r.almacen_id.name or '-'"/></td>
                  <td>
                    <t t-if="r.documento_ids">
                      <t t-foreach="r.documento_ids" t-as="doc">
                        <a t-att-href="'/web/content/x.recepcion.documento/%d/file/%s' % (doc.id, doc.file_filename)" target="_blank"><t t-out="doc.file_filename"/></a>
                      </t>
                    </t>
                    <t t-else=""><span>-</span></t>
                  </td>
                  <td>
                    <div class="estado-actions">
                      <a t-att-class="'estado-btn estado-borrador %s' % ('estado-actual' if r.estado=='borrador' else '')" t-att-href="'/giudico/recepcion/estado/%d/borrador' % r.id" t-translation="on">Borrador</a>
                      <a t-att-class="'estado-btn estado-validada %s' % ('estado-actual' if r.estado=='validada' else '')" t-att-href="'/giudico/recepcion/estado/%d/validada' % r.id" t-translation="on">Validar</a>
                      <a t-att-class="'estado-btn estado-cerrada %s' % ('estado-actual' if r.estado=='cerrada' else '')" t-att-href="'/giudico/recepcion/estado/%d/cerrada' % r.id" t-translation="on">Cerrar</a>
                      <a t-att-class="'estado-btn estado-cancelada %s' % ('estado-actual' if r.estado=='cancelada' else '')" t-att-href="'/giudico/recepcion/estado/%d/cancelada' % r.id" t-translation="on">Cancelar</a>
                    </div>
                  </td>
                  <td>
                    <div class="acciones-crud">
                      <a t-att-href="'/giudico/recepcion/editar/%d' % r.id" class="edit-btn" t-translation="on">Editar</a>
                      <a t-att-href="'/giudico/recepcion/eliminar/%d' % r.id" class="delete-btn" t-att-onclick="'return confirm(\'¬øSeguro que quieres eliminar esta recepci√≥n?\')'" t-translation="on">Eliminar</a>
                      <a t-att-href="'/report/pdf/feedbio_provision_custom.report_recepcion_pdf_template/%d' % r.id" target="_blank" class="print-btn" t-translation="on">PDF</a>
                    </div>
                  </td>
                </tr>
              </t>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </t>
</template>






  </data>
</odoo>
