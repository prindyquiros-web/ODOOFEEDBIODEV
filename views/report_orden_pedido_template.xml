<odoo>
    <!-- Formato de papel sin margen -->
    <record id="paperformat_orden_pedido" model="report.paperformat">
        <field name="name">Orden Pedido Sin Margen</field>
        <field name="default" eval="False"/>
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">5</field>
        <field name="margin_bottom">10</field>
        <field name="margin_left">10</field>
        <field name="margin_right">10</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">90</field>
    </record>

    <!-- Template del reporte -->
    <template id="orden_pedido_pdf_template">
        <t t-call="web.basic_layout">
            <style>
                .page {
                    margin-top: 0 !important;
                    padding-top: 0 !important;
                }
                main.o_main {
                    margin-top: 0 !important;
                    padding-top: 0 !important;
                }
            </style>

            <main class="o_main">
                <div class="page" style="font-family: Arial, sans-serif;">

                    <!-- ENCABEZADO -->
                    <div style="display: flex; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #28a745; padding-bottom: 10px;">
                        <div style="flex: 1;">
                            <img src="/feedbio_provision_custom/static/src/img/LogoGiudico.png" style="max-height: 80px;"/>
                        </div>
                        <div style="flex: 3; text-align: right;">
                            <h1 style="margin: 0; font-size: 24px; color: #28a745;" t-translation="on">ORDEN DE PEDIDO</h1>
                            <p style="margin: 0; font-size: 12px; color: #666;" t-translation="on">Documento generado por el sistema FeedBio</p>
                        </div>
                    </div>

                    <t t-foreach="docs" t-as="doc">

                        <!-- INFORMACIÓN GENERAL -->
                        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px;">
                            <tbody>
                                <tr>
                                    <td style="padding: 6px; font-weight: bold; width: 25%; background: #f8f8f8;" t-translation="on">Referencia:</td>
                                    <td style="padding: 6px;"><t t-out="doc.name"/></td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; font-weight: bold; background: #f8f8f8;" t-translation="on">Proveedor:</td>
                                    <td style="padding: 6px;"><t t-out="doc.supplier_name"/></td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; font-weight: bold; background: #f8f8f8;" t-translation="on">Mt Contratado:</td>
                                    <td style="padding: 6px;"><t t-out="doc.mt_contracted"/></td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px; font-weight: bold; background: #f8f8f8;" t-translation="on">Fecha Entrega:</td>
                                    <td style="padding: 6px;"><t t-out="doc.fecha_entrega"/></td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- DETALLE -->
                        <h3 style="margin-top: 0; margin-bottom: 8px; color: #28a745;" t-translation="on">Detalle de la Orden</h3>
                        <table style="width:100%; border-collapse: collapse; font-size: 13px;" border="1">
                            <thead>
                                <tr style="background-color: #28a745; color: white;">
                                    <th style="padding: 8px;" t-translation="on">Producto</th>
                                    <th style="padding: 8px;" t-translation="on">Cantidad (MT)</th>
                                    <th style="padding: 8px;" t-translation="on">Precio Unitario</th>
                                    <th style="padding: 8px;" t-translation="on">Subtotal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 8px;"><t t-out="doc.product"/></td>
                                    <td style="padding: 8px; text-align: right;"><t t-out="doc.cantidad_mt"/></td>
                                    <td style="padding: 8px; text-align: right;"><t t-out="doc.precio_unitario"/></td>
                                    <td style="padding: 8px; text-align: right;">
                                        <t t-out="doc.cantidad_mt * doc.precio_unitario"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </t>

                    <!-- PIE DE PÁGINA -->
                    <div style="margin-top: 0px; font-size: 11px; color: #666; text-align: center;" t-translation="on">
                        Documento generado automáticamente - No requiere firma
                    </div>

                </div>
            </main>
        </t>
    </template>

    <!-- Acción del reporte -->
    <record id="report_orden_pedido_pdf_action" model="ir.actions.report">
        <field name="name">Orden de Pedido</field>
        <field name="model">x.orden_pedido</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">feedbio_provision_custom.orden_pedido_pdf_template</field>
        <field name="print_report_name">'OrdenPedido-%s' % (object.name)</field>
        <field name="paperformat_id" ref="feedbio_provision_custom.paperformat_orden_pedido"/>
    </record>
</odoo>
